[
  {
    "path": "posts/2022-01-23-ten-less-known-yet-time-saving-r-functions/",
    "title": "Ten less known yet time-saving tidyverse functions",
    "description": "Easy to miss, hard to forget.",
    "author": [
      {
        "name": "Avishai M Tsur",
        "url": {}
      }
    ],
    "date": "2022-01-23",
    "categories": [],
    "contents": "\r\n\r\n\r\n\r\nIntroduction\r\nThroughout the years, we become more fluent using R. However, like in any language, use of accurate words (functions in this case) can shorten, clarify, and save a lot of time in communicating code or insights.\r\nThe purpose of this post is to summarize a few functions learned the hard way, to be used a reference for me, and maybe allow you to discover some new function or new use cases for functions you already know.\r\nData\r\nFor demonstrating purposes, we will use data from the tidytuesday project regarding Chocolate Ratings.\r\n\r\n\r\nchocolate <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2022/2022-01-18/chocolate.csv')\r\n\r\nskimr::skim(chocolate)\r\n\r\n\r\nTable 1: Data summary\r\nName\r\nchocolate\r\nNumber of rows\r\n2530\r\nNumber of columns\r\n10\r\n_______________________\r\n\r\nColumn type frequency:\r\n\r\ncharacter\r\n7\r\nnumeric\r\n3\r\n________________________\r\n\r\nGroup variables\r\nNone\r\nVariable type: character\r\nskim_variable\r\nn_missing\r\ncomplete_rate\r\nmin\r\nmax\r\nempty\r\nn_unique\r\nwhitespace\r\ncompany_manufacturer\r\n0\r\n1.00\r\n2\r\n39\r\n0\r\n580\r\n0\r\ncompany_location\r\n0\r\n1.00\r\n4\r\n21\r\n0\r\n67\r\n0\r\ncountry_of_bean_origin\r\n0\r\n1.00\r\n4\r\n21\r\n0\r\n62\r\n0\r\nspecific_bean_origin_or_bar_name\r\n0\r\n1.00\r\n3\r\n51\r\n0\r\n1605\r\n0\r\ncocoa_percent\r\n0\r\n1.00\r\n3\r\n6\r\n0\r\n46\r\n0\r\ningredients\r\n87\r\n0.97\r\n4\r\n14\r\n0\r\n21\r\n0\r\nmost_memorable_characteristics\r\n0\r\n1.00\r\n3\r\n37\r\n0\r\n2487\r\n0\r\nVariable type: numeric\r\nskim_variable\r\nn_missing\r\ncomplete_rate\r\nmean\r\nsd\r\np0\r\np25\r\np50\r\np75\r\np100\r\nhist\r\nref\r\n0\r\n1\r\n1429.80\r\n757.65\r\n5\r\n802\r\n1454.00\r\n2079.0\r\n2712\r\n▆▇▇▇▇\r\nreview_date\r\n0\r\n1\r\n2014.37\r\n3.97\r\n2006\r\n2012\r\n2015.00\r\n2018.0\r\n2021\r\n▃▅▇▆▅\r\nrating\r\n0\r\n1\r\n3.20\r\n0.45\r\n1\r\n3\r\n3.25\r\n3.5\r\n4\r\n▁▁▅▇▇\r\n\r\nseparate_rows()\r\nAs you may have noticed, the most memorable characteristics of a chocolate are organized in a string with multiple characteristics separated by commas.\r\n\r\n\r\nchocolate %>% sample_n(10) %>% pull(most_memorable_characteristics) \r\n\r\n\r\n [1] \"dominate cocoa notes\"          \"muted, nutty\"                 \r\n [3] \"intense, sweet, brownie\"       \"creamy, complex, coffee\"      \r\n [5] \"sandy, tobacco, molasses\"      \"strawberry, butterscotch, off\"\r\n [7] \"nutty, off, roasty, fatty\"     \"astringent, smomkey cocoa\"    \r\n [9] \"grassy, earthy, coffee\"        \"gritty, sticky, smoke,hammy\"  \r\n\r\nOften, we would like to “unlist” those characteristics, maybe to understand how people describe chocolate. One way of doing this is using ‘separate()’. However, this poses an inconvenience when the number of objects in the list is unknown or variable. ‘separate_rows()’ simplifies the process.\r\n\r\n\r\nchocolate_separated <- chocolate %>% \r\n    select(most_memorable_characteristics) %>% \r\n    separate_rows(most_memorable_characteristics, sep = \", \") \r\n\r\n\r\n\r\nThis makes counting easy.\r\n\r\n\r\nchocolate_separated %>% \r\n    count(most_memorable_characteristics, sort = T) %>% \r\n    head(10)\r\n\r\n\r\n# A tibble: 10 x 2\r\n   most_memorable_characteristics     n\r\n   <chr>                          <int>\r\n 1 sweet                            264\r\n 2 nutty                            259\r\n 3 cocoa                            242\r\n 4 roasty                           209\r\n 5 earthy                           187\r\n 6 creamy                           186\r\n 7 sandy                            164\r\n 8 fatty                            163\r\n 9 floral                           143\r\n10 spicy                            138\r\n\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2022-01-23T17:25:06+02:00",
    "input_file": "ten-less-known-yet-time-saving-r-functions.knit.md"
  },
  {
    "path": "posts/2021-09-04-reproducing-the-results-of-an-rct/",
    "title": "Reproducing the results of an RCT",
    "description": "Here I demonstrate how to use open RCT data to reproduce its results using R.",
    "author": [
      {
        "name": "Avishai M Tsur",
        "url": {}
      }
    ],
    "date": "2021-09-08",
    "categories": [],
    "contents": "\r\n\r\n\r\n\r\nIntroduction\r\nRandomized Controlled Trials (RCTs) are considered the gold-standard of medical research. When RCTs are properly conducted, one can infer causation and not just correlation. In this post, I use open data from the medicaldata r package to reproduce some of the results of an RCT.\r\nThe paper we are going to reproduce is:\r\n\r\nA Randomized Comparison between the Pentax AWS Video Laryngoscope and the Macintosh Laryngoscope in Morbidly Obese Patients, Anesthesia Analgesia 2011; 113: 1082-7.\r\n\r\nWe are going to reproduce Table 1, Figure 2, and Table 2 (Figure 1 is a photo of the Pentax AWS device).\r\nA few important disclaimers\r\nIt is much easier to replicate the analysis when it is well explained and based on open data. Kudos to the authors of the paper and the authors of the medicaldata r package for their contribution to science and truth. None of this was possible without their generosity in sharing the data.\r\nIt is highly suggested to read the paper , the dataset description, and the codebook first and keep them accessible while reading this.\r\nMistakes happen all the time, even in this post.\r\nThroughout this post, we will be using numerous r packages. I wish to thank all of their authors and contributors as well for making this analysis possible and much simpler.\r\nIt is outside the scope of this post to discuss choices in statistical analysis and presentation. Specifically, we will not discuss whether p-values or standardized differences should appear in a comparison of baseline characteristics in an RCT (Table 1), whether the statistical tests used are appropriate, and what is the ideal way to present missing values.\r\nA few very important parts are missing in this post: exploratory data analysis, addressing missing values and potential outliers, unit-testing the code and results, and others. The code presented is highly focused on one part of the data analysis.\r\nData source\r\nTo download the data used for this analysis:\r\n\r\n\r\ninstall.packages(\"medicaldata\")\r\n\r\nmedicaldata::laryngoscope\r\n\r\n\r\n\r\nShort description of the experimental design\r\nNinety nine obese patients (body mass index between 30 and 50 kg/m2) requiring orotracheal intubation for elective surgery were allocated randomly to tracheal intubation with either the Macintosh (using a #4 blade) or the Pentax AWS laryngoscope. Two experienced anesthesiologists served as laryngoscopists. Intubation success rate, time to intubation, ease of intubation, and occurrence of complications were recorded.\r\nThe study tested the hypothesis is that intubation with the Pentax AWS would be easier and faster than with a standard Macintosh #4 blade in obese patients.\r\nAnalysis\r\nPackages\r\nMost of the time, I use tidyverse as the basis of the workflow and skimr to quickly understand the dataset. There are many great packages for tables, but gtsummary by Daniel D. Sjoberg is definitely one of my favorites. The labelled package is a fantastic adjunct to add labels that appear in the tables. As mentioned above, all data comes from the wonderful medicaldata package by Peter D.R. Higgins. The packages survival and survminer are used to recreate the cumulative incidence curve and the Cox regression. The smd package is used specifically to calculate the standardized differences. The broom package, now also part of tidymodels simplifies extracting relevant results from different types of models.\r\n\r\n\r\nlibrary(tidyverse)\r\nlibrary(skimr)\r\nlibrary(gtsummary)\r\nlibrary(survival)\r\nlibrary(survminer)\r\nlibrary(labelled)\r\nlibrary(smd)\r\nlibrary(broom)\r\n\r\n\r\n\r\nLoading the data\r\nThe laryngoscope dataset appears in a data.frame. A first step would be to load it as a tibble for better printing properties (e.g., highlighting missing values, presenting variable types).\r\n\r\n\r\nlar_raw <- as_tibble(medicaldata::laryngoscope)\r\n\r\n\r\n\r\nQuick look\r\n\r\n\r\nskim(lar_raw)\r\n\r\n\r\nTable 1: Data summary\r\nName\r\nlar_raw\r\nNumber of rows\r\n99\r\nNumber of columns\r\n22\r\n_______________________\r\n\r\nColumn type frequency:\r\n\r\nnumeric\r\n22\r\n________________________\r\n\r\nGroup variables\r\nNone\r\nVariable type: numeric\r\nskim_variable\r\nn_missing\r\ncomplete_rate\r\nmean\r\nsd\r\np0\r\np25\r\np50\r\np75\r\np100\r\nhist\r\nage\r\n0\r\n1.00\r\n49.42\r\n13.12\r\n20.00\r\n38.00\r\n51.00\r\n59.00\r\n77\r\n▃▆▇▇▂\r\ngender\r\n0\r\n1.00\r\n0.21\r\n0.41\r\n0.00\r\n0.00\r\n0.00\r\n0.00\r\n1\r\n▇▁▁▁▂\r\nasa\r\n0\r\n1.00\r\n2.83\r\n0.50\r\n2.00\r\n3.00\r\n3.00\r\n3.00\r\n4\r\n▂▁▇▁▁\r\nBMI\r\n2\r\n0.98\r\n41.92\r\n5.23\r\n30.92\r\n37.97\r\n42.00\r\n44.76\r\n61\r\n▃▇▇▁▁\r\nMallampati\r\n1\r\n0.99\r\n1.93\r\n0.85\r\n1.00\r\n1.00\r\n2.00\r\n2.00\r\n4\r\n▇▇▁▅▁\r\nRandomization\r\n0\r\n1.00\r\n0.51\r\n0.50\r\n0.00\r\n0.00\r\n1.00\r\n1.00\r\n1\r\n▇▁▁▁▇\r\nattempt1_time\r\n0\r\n1.00\r\n33.41\r\n15.91\r\n8.96\r\n23.80\r\n29.52\r\n38.92\r\n113\r\n▇▆▁▁▁\r\nattempt1_S_F\r\n0\r\n1.00\r\n0.89\r\n0.32\r\n0.00\r\n1.00\r\n1.00\r\n1.00\r\n1\r\n▁▁▁▁▇\r\nattempt2_time\r\n89\r\n0.10\r\n42.90\r\n15.74\r\n11.00\r\n32.50\r\n49.00\r\n50.50\r\n60\r\n▂▃▁▇▆\r\nattempt2_assigned_method\r\n89\r\n0.10\r\n0.90\r\n0.32\r\n0.00\r\n1.00\r\n1.00\r\n1.00\r\n1\r\n▁▁▁▁▇\r\nattempt2_S_F\r\n89\r\n0.10\r\n0.70\r\n0.48\r\n0.00\r\n0.25\r\n1.00\r\n1.00\r\n1\r\n▃▁▁▁▇\r\nattempt3_time\r\n96\r\n0.03\r\n21.33\r\n7.77\r\n15.00\r\n17.00\r\n19.00\r\n24.50\r\n30\r\n▇▇▁▁▇\r\nattempt3_assigned_method\r\n96\r\n0.03\r\n0.33\r\n0.58\r\n0.00\r\n0.00\r\n0.00\r\n0.50\r\n1\r\n▇▁▁▁▃\r\nattempt3_S_F\r\n96\r\n0.03\r\n1.00\r\n0.00\r\n1.00\r\n1.00\r\n1.00\r\n1.00\r\n1\r\n▁▁▇▁▁\r\nattempts\r\n0\r\n1.00\r\n1.13\r\n0.42\r\n1.00\r\n1.00\r\n1.00\r\n1.00\r\n3\r\n▇▁▁▁▁\r\nfailures\r\n0\r\n1.00\r\n0.13\r\n0.42\r\n0.00\r\n0.00\r\n0.00\r\n0.00\r\n2\r\n▇▁▁▁▁\r\ntotal_intubation_time\r\n0\r\n1.00\r\n37.48\r\n21.02\r\n8.96\r\n24.37\r\n31.00\r\n45.37\r\n100\r\n▆▇▂▁▁\r\nintubation_overall_S_F\r\n0\r\n1.00\r\n0.96\r\n0.20\r\n0.00\r\n1.00\r\n1.00\r\n1.00\r\n1\r\n▁▁▁▁▇\r\nbleeding\r\n0\r\n1.00\r\n0.02\r\n0.14\r\n0.00\r\n0.00\r\n0.00\r\n0.00\r\n1\r\n▇▁▁▁▁\r\nease\r\n0\r\n1.00\r\n45.22\r\n30.47\r\n0.00\r\n15.00\r\n40.00\r\n70.00\r\n100\r\n▇▅▅▃▃\r\nsore_throat\r\n1\r\n0.99\r\n0.47\r\n0.78\r\n0.00\r\n0.00\r\n0.00\r\n1.00\r\n3\r\n▇▂▁▁▁\r\nview\r\n0\r\n1.00\r\n0.82\r\n0.39\r\n0.00\r\n1.00\r\n1.00\r\n1.00\r\n1\r\n▂▁▁▁▇\r\n\r\nSome relevant issues:\r\nMissing values in the BMI, Mallampati, sore_throat columns.\r\nAll variables are defined as numeric, even those that are probably better represented as factors or ordered factors.\r\nProcessing\r\nThe function as.roman is used to translate numbers to Roman numerals, set_variable_labels is a simple way to assign labels once that would appear in all tables created by gtsummary later.\r\n\r\n\r\nlar <- lar_raw %>% \r\n    mutate(male = gender == 1,\r\n           laryngoscope = if_else(\r\n               Randomization == 0, \r\n               \"MacIntosh\", \r\n               \"Pentax AWS\") %>% \r\n               fct_rev(),\r\n           asa_roman = factor(as.character(as.roman(asa))),\r\n           sore_throat_fct = factor(sore_throat, 0:3, c(\"None\", \"Mild\", \"Moderate\", \"Severe\"), ordered = T),\r\n           Mallampati_fct = factor(Mallampati, ordered = T)\r\n           ) %>% \r\n    set_variable_labels(\r\n        age = \"Age, years\",\r\n        male = \"Males\",\r\n        BMI = \"Body mass index, kg/m^2\",\r\n        asa_roman = \"ASA physical status\",\r\n        Mallampati_fct = \"Mallampati score\",\r\n        total_intubation_time = \"Intubation time, s\",\r\n        ease = \"Ease of intubation\",\r\n        attempt1_S_F = \"Successful intubation, first attempt\",\r\n        intubation_overall_S_F = \"Overall successful intubation\",\r\n        attempts = \"No. of intubation attempts\",\r\n        view = \"Cormack-Lehane grade (good)\",\r\n        bleeding = \"Bleeding (trace)\",\r\n        sore_throat_fct = \"Sore throat\"\r\n    )\r\n\r\n\r\n\r\nSMD function\r\nWe define a function get_smd to utilize the smd::smd function and adapt it to be used in gtsummary tables. For more information on how to do this, see this section or type ?tests.\r\n\r\n\r\nget_smd <- function(data, variable, by, ...) {\r\n    smd::smd(x = data[[variable]], g = data[[by]], na.rm = TRUE)[\"estimate\"]\r\n}\r\n\r\n\r\n\r\nTable 1\r\nThe function tbl_summary is used to create descriptive tables and is highly customizable. The presented variables can also be chosen with the argument include =, but sometimes it easier to choose them with select.\r\nThe syntax may be difficult to understand at first, but with some practice it gives a lot of flexibility. Especially, the selection helpers (e.g., all_continuous() and all_categorical()) simplify complex editing of the table in a reproducible way.\r\nRegarding the results, note that the mean BMI in the Pentax AWS group is slightly different that in the article. Assuming we have the same dataset, this is likely a typing error – another reason to use R ± R Markdown to produce the publication-ready results. Also, two missing values of BMI are not mentioned in the table (unlike the one patient with missing Mallampati score), but can be seen clearly in the default tbl_summary output.\r\n\r\n\r\nlar %>% \r\n    select(laryngoscope, age, male, BMI, asa_roman, Mallampati_fct) %>% \r\n    tbl_summary(by = \"laryngoscope\", \r\n                statistic = list(all_continuous() ~ \"{mean} ({sd})\")) %>% \r\n    add_stat(fns = list(\r\n        all_continuous() ~ \"get_smd\",\r\n        all_categorical() ~ \"get_smd\")\r\n        ) %>% \r\n    modify_header(estimate ~ \"Standardized difference\") %>% \r\n    modify_fmt_fun(update = estimate ~ function(x){scales::number(x, accuracy = 0.01)})\r\n\r\n\r\n\r\nhtml {\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\r\n}\r\n\r\n#zhigbdabae .gt_table {\r\n  display: table;\r\n  border-collapse: collapse;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  color: #333333;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  font-style: normal;\r\n  background-color: #FFFFFF;\r\n  width: auto;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #A8A8A8;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #A8A8A8;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n}\r\n\r\n#zhigbdabae .gt_heading {\r\n  background-color: #FFFFFF;\r\n  text-align: center;\r\n  border-bottom-color: #FFFFFF;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#zhigbdabae .gt_title {\r\n  color: #333333;\r\n  font-size: 125%;\r\n  font-weight: initial;\r\n  padding-top: 4px;\r\n  padding-bottom: 4px;\r\n  border-bottom-color: #FFFFFF;\r\n  border-bottom-width: 0;\r\n}\r\n\r\n#zhigbdabae .gt_subtitle {\r\n  color: #333333;\r\n  font-size: 85%;\r\n  font-weight: initial;\r\n  padding-top: 0;\r\n  padding-bottom: 6px;\r\n  border-top-color: #FFFFFF;\r\n  border-top-width: 0;\r\n}\r\n\r\n#zhigbdabae .gt_bottom_border {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#zhigbdabae .gt_col_headings {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#zhigbdabae .gt_col_heading {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#zhigbdabae .gt_column_spanner_outer {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n}\r\n\r\n#zhigbdabae .gt_column_spanner_outer:first-child {\r\n  padding-left: 0;\r\n}\r\n\r\n#zhigbdabae .gt_column_spanner_outer:last-child {\r\n  padding-right: 0;\r\n}\r\n\r\n#zhigbdabae .gt_column_spanner {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  overflow-x: hidden;\r\n  display: inline-block;\r\n  width: 100%;\r\n}\r\n\r\n#zhigbdabae .gt_group_heading {\r\n  padding: 8px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#zhigbdabae .gt_empty_group_heading {\r\n  padding: 0.5px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#zhigbdabae .gt_from_md > :first-child {\r\n  margin-top: 0;\r\n}\r\n\r\n#zhigbdabae .gt_from_md > :last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n#zhigbdabae .gt_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  margin: 10px;\r\n  border-top-style: solid;\r\n  border-top-width: 1px;\r\n  border-top-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#zhigbdabae .gt_stub {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-right-style: solid;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  padding-left: 12px;\r\n}\r\n\r\n#zhigbdabae .gt_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#zhigbdabae .gt_first_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#zhigbdabae .gt_grand_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#zhigbdabae .gt_first_grand_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: double;\r\n  border-top-width: 6px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#zhigbdabae .gt_striped {\r\n  background-color: rgba(128, 128, 128, 0.05);\r\n}\r\n\r\n#zhigbdabae .gt_table_body {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#zhigbdabae .gt_footnotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#zhigbdabae .gt_footnote {\r\n  margin: 0px;\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#zhigbdabae .gt_sourcenotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#zhigbdabae .gt_sourcenote {\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#zhigbdabae .gt_left {\r\n  text-align: left;\r\n}\r\n\r\n#zhigbdabae .gt_center {\r\n  text-align: center;\r\n}\r\n\r\n#zhigbdabae .gt_right {\r\n  text-align: right;\r\n  font-variant-numeric: tabular-nums;\r\n}\r\n\r\n#zhigbdabae .gt_font_normal {\r\n  font-weight: normal;\r\n}\r\n\r\n#zhigbdabae .gt_font_bold {\r\n  font-weight: bold;\r\n}\r\n\r\n#zhigbdabae .gt_font_italic {\r\n  font-style: italic;\r\n}\r\n\r\n#zhigbdabae .gt_super {\r\n  font-size: 65%;\r\n}\r\n\r\n#zhigbdabae .gt_footnote_marks {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n  font-size: 65%;\r\n}\r\nCharacteristic\r\n      Pentax AWS, N = 501\r\n      MacIntosh, N = 491\r\n      Standardized difference\r\n    Age, years\r\n50 (12)\r\n49 (14)\r\n0.14Males\r\n11 (22%)\r\n10 (20%)\r\n0.04Body mass index, kg/m^2\r\n41.4 (4.4)\r\n42.5 (5.9)\r\n-0.21Unknown\r\n2\r\n0\r\nASA physical status\r\n\r\n\r\n0.41II\r\n15 (30%)\r\n7 (14%)\r\nIII\r\n32 (64%)\r\n40 (82%)\r\nIV\r\n3 (6.0%)\r\n2 (4.1%)\r\nMallampati score\r\n\r\n\r\n0.571\r\n21 (42%)\r\n14 (29%)\r\n2\r\n18 (36%)\r\n21 (44%)\r\n3\r\n7 (14%)\r\n13 (27%)\r\n4\r\n4 (8.0%)\r\n0 (0%)\r\nUnknown\r\n0\r\n1\r\n\r\n        \r\n          1\r\n          \r\n           \r\n          Mean (SD); n (%)\r\n          \r\n      \r\n    \r\n\r\nTime to success (Figure 2)\r\nTo reproduce the figure, we use the ggsurvplot function from survminer. The strata names can be set inside the function using legend.labs = and a character vector. However, this could easily lead to a mistake in labeling without producing an error nor warning. Therefore, it is recommended to adjust the labels programmatically.\r\n\r\n\r\ncum_inc <- surv_fit(Surv(total_intubation_time, intubation_overall_S_F) ~ laryngoscope, data = lar)\r\n\r\nnames(cum_inc$strata) <- names(cum_inc$strata) %>% str_remove(\"laryngoscope=\")\r\n\r\ncum_inc %>% \r\n    ggsurvplot(fun = \"event\", conf.int = T, pval = T,\r\n               risk.table = T, surv.median.line = \"hv\",\r\n               xlab = \"Total Intubation Time (s)\",\r\n               ylab = \"% Successful Intubation\",\r\n               surv.scale = \"percent\",\r\n               legend.title = \"Group\",\r\n               tables.y.text = F,\r\n               legend = c(0.1, 0.85),\r\n               pval.coord = c(75, 0.1)\r\n            )\r\n\r\n\r\n\r\n\r\nTreatment effect functions\r\nTable 2 is a regular cross table, very similar to Table 1, but also has Treatment effect calculated in different ways for each row. This poses a challenge as many of the functions needed for treatment effect are not built-in to gtsummary. However, these could easily be defined - either as general functions or as the results of a calculation.\r\nFisher’s exact example\r\nFor example, one could calculate the Fisher’s exact between the two columns. Notice that the add_p function does have a \"fisher.test\" option, but since we are calculating many different types of treatment effects using add_difference, I calculate it here separately.\r\n\r\n\r\nget_fe <- function(data, variable, by, ...) {\r\n    fisher.test(data[[variable]], data[[by]]) %>% \r\n        tidy() %>% \r\n        mutate(estimate = NA_real_,\r\n                  conf.low = NA_real_,\r\n                  conf.high = NA_real_,\r\n                  )\r\n}\r\n\r\n\r\n\r\nHazard ratio example\r\nFor the Cox regression, I use a different approach where the function returns just a one-row tibble with the results regardless of the input.\r\n\r\n\r\nget_hr <- function(data, variable, by, ...) {\r\n    data <- lar %>% mutate(laryngoscope = fct_rev(laryngoscope))\r\n    coxph(Surv(total_intubation_time, intubation_overall_S_F) ~ \r\n              laryngoscope + asa_roman + Mallampati_fct, \r\n          data = data) %>% \r\n        tidy(exponentiate = T, conf.int = T) %>% \r\n        slice(1) %>% \r\n        mutate(method = \"Cox regression\")\r\n}\r\n\r\n\r\n\r\nSome more examples\r\n\r\n\r\nget_ancova <- function(data, variable, by, ...) {\r\n    mean_diff <- t.test(data[[variable]] ~ data[[by]]) %>% \r\n        tidy() %>% \r\n        select(estimate, conf.low, conf.high)\r\n    p_val <- aov(ease ~ laryngoscope + asa_roman + Mallampati_fct, data = lar) %>% \r\n        tidy(conf.int = T) %>% \r\n        slice(1)\r\n    \r\n    bind_cols(mean_diff, p_val) %>% \r\n        mutate(method = \"ANCOVA\")\r\n}\r\n\r\nget_glm <- function(data, variable, by, ...) {\r\n    data <- lar %>% mutate(laryngoscope = fct_rev(laryngoscope))\r\n    data$outcome <- data[[variable]]\r\n    data <- data %>% select(outcome, laryngoscope, asa_roman, Mallampati_fct) %>% \r\n        na.omit()\r\n    glm(outcome ~ laryngoscope + \r\n            asa_roman + Mallampati_fct, \r\n        family = \"binomial\",\r\n        data = data\r\n        ) %>% \r\n        tidy(exponentiate = T, conf.int = T) %>% \r\n        slice(2) %>% \r\n        mutate(method = \"Logistic regression\")\r\n}\r\n\r\n\r\n\r\nTable 2\r\nNote that it is possible to pass the tbl_summary the full tibble and to select variables for presentation using the include = argument. This allows the use of adj.vars = with a character vector of variables used for adjustment only. For example, with add_difference(test = list(all_continuous() ~ \"ancova\").\r\nOn purpose, we did not include here all treatment effects. I highly suggest you try writing functions for them yourself.\r\n\r\n\r\nlar %>% \r\n    select(laryngoscope, total_intubation_time,\r\n           ease, attempt1_S_F,\r\n           intubation_overall_S_F, attempts, view, bleeding, sore_throat_fct\r\n           ) %>% \r\n    tbl_summary(by = \"laryngoscope\", statistic = list(ease ~ \"{mean} ({sd})\")\r\n                ) %>% \r\n    add_difference(test = list(\r\n        total_intubation_time ~ \"get_hr\",\r\n        ease ~ \"get_ancova\",\r\n        intubation_overall_S_F ~ \"get_fe\",\r\n        bleeding ~ \"get_fe\",\r\n        attempt1_S_F ~ \"get_glm\",\r\n        view ~ \"get_glm\"\r\n        ))\r\n\r\n\r\n\r\nhtml {\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\r\n}\r\n\r\n#cyqllwrosu .gt_table {\r\n  display: table;\r\n  border-collapse: collapse;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  color: #333333;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  font-style: normal;\r\n  background-color: #FFFFFF;\r\n  width: auto;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #A8A8A8;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #A8A8A8;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n}\r\n\r\n#cyqllwrosu .gt_heading {\r\n  background-color: #FFFFFF;\r\n  text-align: center;\r\n  border-bottom-color: #FFFFFF;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#cyqllwrosu .gt_title {\r\n  color: #333333;\r\n  font-size: 125%;\r\n  font-weight: initial;\r\n  padding-top: 4px;\r\n  padding-bottom: 4px;\r\n  border-bottom-color: #FFFFFF;\r\n  border-bottom-width: 0;\r\n}\r\n\r\n#cyqllwrosu .gt_subtitle {\r\n  color: #333333;\r\n  font-size: 85%;\r\n  font-weight: initial;\r\n  padding-top: 0;\r\n  padding-bottom: 6px;\r\n  border-top-color: #FFFFFF;\r\n  border-top-width: 0;\r\n}\r\n\r\n#cyqllwrosu .gt_bottom_border {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#cyqllwrosu .gt_col_headings {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#cyqllwrosu .gt_col_heading {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#cyqllwrosu .gt_column_spanner_outer {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n}\r\n\r\n#cyqllwrosu .gt_column_spanner_outer:first-child {\r\n  padding-left: 0;\r\n}\r\n\r\n#cyqllwrosu .gt_column_spanner_outer:last-child {\r\n  padding-right: 0;\r\n}\r\n\r\n#cyqllwrosu .gt_column_spanner {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  overflow-x: hidden;\r\n  display: inline-block;\r\n  width: 100%;\r\n}\r\n\r\n#cyqllwrosu .gt_group_heading {\r\n  padding: 8px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#cyqllwrosu .gt_empty_group_heading {\r\n  padding: 0.5px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#cyqllwrosu .gt_from_md > :first-child {\r\n  margin-top: 0;\r\n}\r\n\r\n#cyqllwrosu .gt_from_md > :last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n#cyqllwrosu .gt_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  margin: 10px;\r\n  border-top-style: solid;\r\n  border-top-width: 1px;\r\n  border-top-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#cyqllwrosu .gt_stub {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-right-style: solid;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  padding-left: 12px;\r\n}\r\n\r\n#cyqllwrosu .gt_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#cyqllwrosu .gt_first_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#cyqllwrosu .gt_grand_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#cyqllwrosu .gt_first_grand_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: double;\r\n  border-top-width: 6px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#cyqllwrosu .gt_striped {\r\n  background-color: rgba(128, 128, 128, 0.05);\r\n}\r\n\r\n#cyqllwrosu .gt_table_body {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#cyqllwrosu .gt_footnotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#cyqllwrosu .gt_footnote {\r\n  margin: 0px;\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#cyqllwrosu .gt_sourcenotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#cyqllwrosu .gt_sourcenote {\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#cyqllwrosu .gt_left {\r\n  text-align: left;\r\n}\r\n\r\n#cyqllwrosu .gt_center {\r\n  text-align: center;\r\n}\r\n\r\n#cyqllwrosu .gt_right {\r\n  text-align: right;\r\n  font-variant-numeric: tabular-nums;\r\n}\r\n\r\n#cyqllwrosu .gt_font_normal {\r\n  font-weight: normal;\r\n}\r\n\r\n#cyqllwrosu .gt_font_bold {\r\n  font-weight: bold;\r\n}\r\n\r\n#cyqllwrosu .gt_font_italic {\r\n  font-style: italic;\r\n}\r\n\r\n#cyqllwrosu .gt_super {\r\n  font-size: 65%;\r\n}\r\n\r\n#cyqllwrosu .gt_footnote_marks {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n  font-size: 65%;\r\n}\r\nCharacteristic\r\n      Pentax AWS, N = 501\r\n      MacIntosh, N = 491\r\n      Difference2\r\n      95% CI2,3\r\n      p-value2\r\n    Intubation time, s\r\n38 (31, 50)\r\n26 (22, 29)\r\n0.35\r\n0.21, 0.56\r\n<0.001Ease of intubation\r\n52 (31)\r\n38 (28)\r\n14\r\n2.0, 26\r\n0.023Successful intubation, first attempt\r\n43 (86%)\r\n45 (92%)\r\n64%\r\n14%, 261%\r\n0.5Overall successful intubation\r\n46 (92%)\r\n49 (100%)\r\n\r\n\r\n0.12No. of intubation attempts\r\n\r\n\r\n\r\n\r\n1\r\n44 (88%)\r\n45 (92%)\r\n\r\n\r\n2\r\n3 (6.0%)\r\n4 (8.2%)\r\n\r\n\r\n3\r\n3 (6.0%)\r\n0 (0%)\r\n\r\n\r\nCormack-Lehane grade (good)\r\n43 (86%)\r\n38 (78%)\r\n210%\r\n65%, 763%\r\n0.2Bleeding (trace)\r\n2 (4.0%)\r\n0 (0%)\r\n\r\n\r\n0.5Sore throat\r\n\r\n\r\n\r\n\r\nNone\r\n34 (68%)\r\n32 (67%)\r\n\r\n\r\nMild\r\n9 (18%)\r\n12 (25%)\r\n\r\n\r\nModerate\r\n5 (10%)\r\n3 (6.2%)\r\n\r\n\r\nSevere\r\n2 (4.0%)\r\n1 (2.1%)\r\n\r\n\r\nUnknown\r\n0\r\n1\r\n\r\n\r\n\r\n        \r\n          1\r\n          \r\n           \r\n          Median (IQR); Mean (SD); n (%)\r\n          \r\n        \r\n          2\r\n          \r\n           \r\n          Cox regression; ANCOVA; Logistic regression; Fisher's Exact Test for Count Data\r\n          \r\n        \r\n          3\r\n          \r\n           \r\n          CI = Confidence Interval\r\n          \r\n      \r\n    \r\n\r\nLessons learned\r\nGeneral lessons\r\nReproducing an analysis of a published study, where you have the same data and the finished product, is a great exercise that forces you to understand the importance of the methods section, step out of the box of the methods you regularly use, and get to know new arguments and functions.\r\nData analysis lessons\r\nScript to publication-ready tables / plots are likely to minimize typing errors.\r\nWhenever a good package with a good tested function exists, it is usually best practice to use it instead of writing a new untested function. If necessary, a function wrapper is better than writing for scratch. This could have its disadvantages, especially when packages are updated. Therefore, it is important to also keep the session information.\r\nMuch of the code presented can be improved, shortened, or simplified. Although most of the time correlated, sometimes coding write and getting things done are a trade-off.\r\nR related lessons\r\nLabeling a ggplot, or in this case a ggsurvplot, for commiunication can lead to unintentional errors. One way to avoid it is to produce the labels programmatically instead of manually (see Figure 2).\r\nskimr::skim() is extremely valuable in exposing datasets problem fast.\r\nlabelled::set_variable_labels allows assigning labels once to be used in multiple tables.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-11-27T21:58:36+02:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-08-21-replicating-a-fraud-detection/",
    "title": "Replicating a fraud detection analysis",
    "description": "A blog post suggested evidence of fraud in an influential field experiment. I replicate their analysis and share the code.",
    "author": [
      {
        "name": "Avishai M Tsur",
        "url": {}
      }
    ],
    "date": "2021-08-21",
    "categories": [],
    "contents": "\r\nIntroduction\r\nIn recent days, Psychology and Business Management twitter is on fire. Not due to the COVID-19 pandemic, exiting Afghanistan, or climate change, but due to evidence of flaws in a highly cited paper from 2012 titled: “Signing at the beginning makes ethics salient and decreases dishonest self-reports in comparison to signing at the end”.\r\nFor some context see:\r\n- Datacolada\r\n- PNAS 2012 paper\r\n- PNAS 2020 paper\r\nIn this post, I will try to replicate some of the findings of Prof. Uri Simonsohn, Prof. Leif D. Nelson, Prof. Joe Simmons and unknown others visualizing the concerns with one of the experiments in the study that originally claimed dishonesty can be reduced by asking people to sign a statement of honest intent before providing information (i.e., at the top of a document) rather than after providing information (i.e., at the bottom of a document).\r\nIf you are an Rstats user, I hope for you this would be a quick peek to some of the methods used (in R) to detect errors, frauds, and miscalculations in scientific literature.\r\nA few important disclaimers\r\nIt is highly suggested to read the Datacolada blog post first and keep it open while reading this.\r\nI am not a psychologist, a fraud detection expert, nor business expert. My pure intention is to replicate the analysis for there to be an open-sourced code so others could replicate it as well and have a reference for future use.\r\nThe Datacoloda blog post authors shared their extensive code on ResearchBox. Here I share a code that focuses only on the specific visualizations with some tips and tricks of mine. If you find the analysis interesting, it would be no brainer that you should also look at their original code.\r\nNo part of this post suggests responsibility, bad intentions, or blame.\r\nMistakes happen all the time, even in this post.\r\nThe replication is not a full replication, but of the main findings.\r\nIt is much easier to replicate the analysis when it is well explained, based on open data. Kudos to the known and unknown authors of the Datacolada blog, and to the authors of the 2012 and 2020 papers for their contribution to science and truth.\r\nAlso, it is much more difficult to conduct a fraud analysis when nobody pointed the flaws for you. It is very likely that most of the analyses that they performed and did not raise suspicion was not published at all. So do not assume it is easy.\r\nEnglish is not my primary language, so excuse any mistakes.\r\nData source\r\nThe data used for this post is available at this link in a file named: DrivingdataAll(1).xls.\r\nAs you will see later, for technical reasons I opened the file in MS Excel and saved it as an .xlsx file.\r\nQuick and dirty description of the experimental design\r\nThe experiment (#3 in the original paper) used data from a car insurance company. Customers were randomized to receive a policy with an honesty statement at the top or at the bottom of the form. “The first odometer reading was based on the mileage information the insurance company previously had on file, whereas the second was the current odometer reading that customers reported (and had an incentive to report smaller numbers - AMT).” To make a long story short, the conclusion was “a simple change in the location of a signature request can significantly influence the extent to which people on average will misreport information to advance their own self-interest.”\r\nProcessing\r\nRead the data\r\nFirst, let us read the data and change columns names for consistency, comfort, and brevity.\r\n\r\n\r\ndrv <- read_xlsx(\"Data/DrivingdataAll.xlsx\") %>% \r\n    janitor::clean_names() %>% \r\n    rename(arm = \"omr_version\",\r\n           pid = \"policy_number_masked\",\r\n           car_1_pre = \"odom_reading_1_previous\",\r\n           car_1_post = \"odom_reading_1_update\",\r\n           car_2_pre = \"odom_reading_2_previous\",\r\n           car_2_post = \"odom_reading_2_update\",\r\n           car_3_pre = \"odom_reading_3_previous\",\r\n           car_3_post = \"odom_reading_3_update\",\r\n           car_4_pre = \"odom_reading_4_previous\",\r\n           car_4_post = \"odom_reading_4_update\",\r\n           avg_pre = \"odom_reading_all_previous\",\r\n           avg_post = \"odom_reading_all_update\",\r\n           avg_diff = \"diff_all\",\r\n           ind1 = \"count1\",\r\n           ind2 = \"count2\",\r\n           ind3 = \"count3\",\r\n           ind4 = \"count4\",\r\n           n_cars = \"number_cars_in_policy\"\r\n           )\r\n\r\n\r\n\r\nQuick inspection\r\n\r\n\r\nsample_n(drv, 10) %>% paged_table()\r\n\r\n\r\n\r\n\r\n{\"columns\":[{\"label\":[\"arm\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"pid\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"car_1_pre\"],\"name\":[3],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"car_1_post\"],\"name\":[4],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"car_2_pre\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"car_2_post\"],\"name\":[6],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"car_3_pre\"],\"name\":[7],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"car_3_post\"],\"name\":[8],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"car_4_pre\"],\"name\":[9],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"car_4_post\"],\"name\":[10],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"avg_pre\"],\"name\":[11],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"avg_post\"],\"name\":[12],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"avg_diff\"],\"name\":[13],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"ind1\"],\"name\":[14],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"ind2\"],\"name\":[15],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"ind3\"],\"name\":[16],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"ind4\"],\"name\":[17],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"n_cars\"],\"name\":[18],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Sign Bottom\",\"2\":\"4401\",\"3\":\"150246\",\"4\":\"167815\",\"5\":\"130295\",\"6\":\"159497\",\"7\":\"NA\",\"8\":\"NA\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"140270.5\",\"12\":\"163656.0\",\"13\":\"23385.5\",\"14\":\"1\",\"15\":\"1\",\"16\":\"0\",\"17\":\"0\",\"18\":\"2\"},{\"1\":\"Sign Bottom\",\"2\":\"3036\",\"3\":\"95676\",\"4\":\"144820\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"NA\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"95676.0\",\"12\":\"144820.0\",\"13\":\"49144.0\",\"14\":\"1\",\"15\":\"0\",\"16\":\"0\",\"17\":\"0\",\"18\":\"1\"},{\"1\":\"Sign Top\",\"2\":\"10962\",\"3\":\"148312\",\"4\":\"194604\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"NA\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"148312.0\",\"12\":\"194604.0\",\"13\":\"46292.0\",\"14\":\"1\",\"15\":\"0\",\"16\":\"0\",\"17\":\"0\",\"18\":\"1\"},{\"1\":\"Sign Bottom\",\"2\":\"5054\",\"3\":\"58345\",\"4\":\"106842\",\"5\":\"52417\",\"6\":\"56813\",\"7\":\"NA\",\"8\":\"NA\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"55381.0\",\"12\":\"81827.5\",\"13\":\"26446.5\",\"14\":\"1\",\"15\":\"1\",\"16\":\"0\",\"17\":\"0\",\"18\":\"2\"},{\"1\":\"Sign Bottom\",\"2\":\"12333\",\"3\":\"84457\",\"4\":\"128501\",\"5\":\"38217\",\"6\":\"61265\",\"7\":\"NA\",\"8\":\"NA\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"61337.0\",\"12\":\"94883.0\",\"13\":\"33546.0\",\"14\":\"1\",\"15\":\"1\",\"16\":\"0\",\"17\":\"0\",\"18\":\"2\"},{\"1\":\"Sign Bottom\",\"2\":\"13150\",\"3\":\"57868\",\"4\":\"84253\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"NA\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"57868.0\",\"12\":\"84253.0\",\"13\":\"26385.0\",\"14\":\"1\",\"15\":\"0\",\"16\":\"0\",\"17\":\"0\",\"18\":\"1\"},{\"1\":\"Sign Bottom\",\"2\":\"2738\",\"3\":\"59013\",\"4\":\"83933\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"NA\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"59013.0\",\"12\":\"83933.0\",\"13\":\"24920.0\",\"14\":\"1\",\"15\":\"0\",\"16\":\"0\",\"17\":\"0\",\"18\":\"1\"},{\"1\":\"Sign Top\",\"2\":\"3994\",\"3\":\"71295\",\"4\":\"109348\",\"5\":\"38140\",\"6\":\"61183\",\"7\":\"NA\",\"8\":\"NA\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"54717.5\",\"12\":\"85265.5\",\"13\":\"30548.0\",\"14\":\"1\",\"15\":\"1\",\"16\":\"0\",\"17\":\"0\",\"18\":\"2\"},{\"1\":\"Sign Bottom\",\"2\":\"7690\",\"3\":\"32401\",\"4\":\"61426\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"NA\",\"8\":\"NA\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"32401.0\",\"12\":\"61426.0\",\"13\":\"29025.0\",\"14\":\"1\",\"15\":\"0\",\"16\":\"0\",\"17\":\"0\",\"18\":\"1\"},{\"1\":\"Sign Top\",\"2\":\"6342\",\"3\":\"63000\",\"4\":\"105179\",\"5\":\"NA\",\"6\":\"NA\",\"7\":\"0\",\"8\":\"16457\",\"9\":\"NA\",\"10\":\"NA\",\"11\":\"31500.0\",\"12\":\"60818.0\",\"13\":\"29318.0\",\"14\":\"1\",\"15\":\"0\",\"16\":\"1\",\"17\":\"0\",\"18\":\"2\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\r\n  \r\n\r\nFor each policy there is a row with up to four cars with first and last odometer readings.\r\nThe clue\r\nOne early clue of what is about to come was mentioned in the PNAS 2020 paper. Despite randomization, baseline readings were significantly different.\r\n\r\n\r\ndrv %>% select(avg_pre, avg_post, avg_diff, arm) %>% \r\n    tbl_summary(by = arm, \r\n                statistic = list(all_continuous() ~ \"{mean} ({sd})\"), \r\n                digits = list(all_continuous() ~ c(2,2))) %>% \r\n    add_p(test = list(all_continuous() ~ \"t.test\"))\r\n\r\n\r\n\r\nhtml {\r\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\r\n}\r\n\r\n#dtecshnxcg .gt_table {\r\n  display: table;\r\n  border-collapse: collapse;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  color: #333333;\r\n  font-size: 16px;\r\n  font-weight: normal;\r\n  font-style: normal;\r\n  background-color: #FFFFFF;\r\n  width: auto;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #A8A8A8;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #A8A8A8;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n}\r\n\r\n#dtecshnxcg .gt_heading {\r\n  background-color: #FFFFFF;\r\n  text-align: center;\r\n  border-bottom-color: #FFFFFF;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#dtecshnxcg .gt_title {\r\n  color: #333333;\r\n  font-size: 125%;\r\n  font-weight: initial;\r\n  padding-top: 4px;\r\n  padding-bottom: 4px;\r\n  border-bottom-color: #FFFFFF;\r\n  border-bottom-width: 0;\r\n}\r\n\r\n#dtecshnxcg .gt_subtitle {\r\n  color: #333333;\r\n  font-size: 85%;\r\n  font-weight: initial;\r\n  padding-top: 0;\r\n  padding-bottom: 6px;\r\n  border-top-color: #FFFFFF;\r\n  border-top-width: 0;\r\n}\r\n\r\n#dtecshnxcg .gt_bottom_border {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#dtecshnxcg .gt_col_headings {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#dtecshnxcg .gt_col_heading {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 6px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#dtecshnxcg .gt_column_spanner_outer {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: normal;\r\n  text-transform: inherit;\r\n  padding-top: 0;\r\n  padding-bottom: 0;\r\n  padding-left: 4px;\r\n  padding-right: 4px;\r\n}\r\n\r\n#dtecshnxcg .gt_column_spanner_outer:first-child {\r\n  padding-left: 0;\r\n}\r\n\r\n#dtecshnxcg .gt_column_spanner_outer:last-child {\r\n  padding-right: 0;\r\n}\r\n\r\n#dtecshnxcg .gt_column_spanner {\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: bottom;\r\n  padding-top: 5px;\r\n  padding-bottom: 5px;\r\n  overflow-x: hidden;\r\n  display: inline-block;\r\n  width: 100%;\r\n}\r\n\r\n#dtecshnxcg .gt_group_heading {\r\n  padding: 8px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#dtecshnxcg .gt_empty_group_heading {\r\n  padding: 0.5px;\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  vertical-align: middle;\r\n}\r\n\r\n#dtecshnxcg .gt_from_md > :first-child {\r\n  margin-top: 0;\r\n}\r\n\r\n#dtecshnxcg .gt_from_md > :last-child {\r\n  margin-bottom: 0;\r\n}\r\n\r\n#dtecshnxcg .gt_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  margin: 10px;\r\n  border-top-style: solid;\r\n  border-top-width: 1px;\r\n  border-top-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 1px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 1px;\r\n  border-right-color: #D3D3D3;\r\n  vertical-align: middle;\r\n  overflow-x: hidden;\r\n}\r\n\r\n#dtecshnxcg .gt_stub {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  font-size: 100%;\r\n  font-weight: initial;\r\n  text-transform: inherit;\r\n  border-right-style: solid;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n  padding-left: 12px;\r\n}\r\n\r\n#dtecshnxcg .gt_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#dtecshnxcg .gt_first_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#dtecshnxcg .gt_grand_summary_row {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  text-transform: inherit;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n}\r\n\r\n#dtecshnxcg .gt_first_grand_summary_row {\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  border-top-style: double;\r\n  border-top-width: 6px;\r\n  border-top-color: #D3D3D3;\r\n}\r\n\r\n#dtecshnxcg .gt_striped {\r\n  background-color: rgba(128, 128, 128, 0.05);\r\n}\r\n\r\n#dtecshnxcg .gt_table_body {\r\n  border-top-style: solid;\r\n  border-top-width: 2px;\r\n  border-top-color: #D3D3D3;\r\n  border-bottom-style: solid;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n}\r\n\r\n#dtecshnxcg .gt_footnotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#dtecshnxcg .gt_footnote {\r\n  margin: 0px;\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#dtecshnxcg .gt_sourcenotes {\r\n  color: #333333;\r\n  background-color: #FFFFFF;\r\n  border-bottom-style: none;\r\n  border-bottom-width: 2px;\r\n  border-bottom-color: #D3D3D3;\r\n  border-left-style: none;\r\n  border-left-width: 2px;\r\n  border-left-color: #D3D3D3;\r\n  border-right-style: none;\r\n  border-right-width: 2px;\r\n  border-right-color: #D3D3D3;\r\n}\r\n\r\n#dtecshnxcg .gt_sourcenote {\r\n  font-size: 90%;\r\n  padding: 4px;\r\n}\r\n\r\n#dtecshnxcg .gt_left {\r\n  text-align: left;\r\n}\r\n\r\n#dtecshnxcg .gt_center {\r\n  text-align: center;\r\n}\r\n\r\n#dtecshnxcg .gt_right {\r\n  text-align: right;\r\n  font-variant-numeric: tabular-nums;\r\n}\r\n\r\n#dtecshnxcg .gt_font_normal {\r\n  font-weight: normal;\r\n}\r\n\r\n#dtecshnxcg .gt_font_bold {\r\n  font-weight: bold;\r\n}\r\n\r\n#dtecshnxcg .gt_font_italic {\r\n  font-style: italic;\r\n}\r\n\r\n#dtecshnxcg .gt_super {\r\n  font-size: 65%;\r\n}\r\n\r\n#dtecshnxcg .gt_footnote_marks {\r\n  font-style: italic;\r\n  font-weight: normal;\r\n  font-size: 65%;\r\n}\r\nCharacteristic\r\n      Sign Bottom, N = 6,6641\r\n      Sign Top, N = 6,8241\r\n      p-value2\r\n    avg_pre\r\n75,034.50 (50,265.35)\r\n59,692.71 (49,953.51)\r\n<0.001avg_post\r\n98,705.14 (51,934.76)\r\n85,791.10 (51,701.31)\r\n<0.001avg_diff\r\n23,670.64 (12,621.38)\r\n26,098.40 (12,253.37)\r\n<0.001\r\n        \r\n          1\r\n          \r\n           \r\n          Mean (SD)\r\n          \r\n        \r\n          2\r\n          \r\n           \r\n          Welch Two Sample t-test\r\n          \r\n      \r\n    \r\n\r\nIt is unknown to me why numbers were presented to the second decimal digit (in the paper), but I left it here as it is irrelevant for the topic.\r\nPrepping\r\nI will refer to some pitfalls of using spreadsheet applications for processing data later, but for now, let us pivot the table to a more tidy format. This reshaping would ease visualizing. Notice how I try to conduct most if not all processing in an R or Rmarkdown script. This way, each step is documented and can be more easily replicated. This also allows correcting early mistakes without having to redo all of the analysis manually.\r\n\r\n\r\ndrv_long <- drv %>% \r\n    select(arm, pid, starts_with(\"car\")) %>% \r\n    pivot_longer(cols = starts_with(\"car\"), names_to = \"car\", values_to = \"miles\") %>% \r\n    na.omit() %>% \r\n    extract(col = car, \r\n            into = c(\"car_num\", \"period\"), \r\n            regex = \"car_([[:digit:]])_([[:alpha:]]*)\") %>% \r\n    mutate(car_num = paste0(\"Car \", car_num),\r\n           period = str_to_title(period),\r\n           period = factor(period) %>% fct_rev())\r\n\r\nsample_n(drv_long, 10) %>% paged_table()\r\n\r\n\r\n\r\n\r\n{\"columns\":[{\"label\":[\"arm\"],\"name\":[1],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"pid\"],\"name\":[2],\"type\":[\"dbl\"],\"align\":[\"right\"]},{\"label\":[\"car_num\"],\"name\":[3],\"type\":[\"chr\"],\"align\":[\"left\"]},{\"label\":[\"period\"],\"name\":[4],\"type\":[\"fct\"],\"align\":[\"left\"]},{\"label\":[\"miles\"],\"name\":[5],\"type\":[\"dbl\"],\"align\":[\"right\"]}],\"data\":[{\"1\":\"Sign Top\",\"2\":\"825\",\"3\":\"Car 1\",\"4\":\"Post\",\"5\":\"161342\"},{\"1\":\"Sign Top\",\"2\":\"4559\",\"3\":\"Car 1\",\"4\":\"Post\",\"5\":\"36298\"},{\"1\":\"Sign Bottom\",\"2\":\"11628\",\"3\":\"Car 1\",\"4\":\"Post\",\"5\":\"85618\"},{\"1\":\"Sign Bottom\",\"2\":\"13471\",\"3\":\"Car 1\",\"4\":\"Pre\",\"5\":\"143885\"},{\"1\":\"Sign Bottom\",\"2\":\"12274\",\"3\":\"Car 1\",\"4\":\"Pre\",\"5\":\"98914\"},{\"1\":\"Sign Top\",\"2\":\"4161\",\"3\":\"Car 2\",\"4\":\"Post\",\"5\":\"20855\"},{\"1\":\"Sign Bottom\",\"2\":\"3595\",\"3\":\"Car 2\",\"4\":\"Pre\",\"5\":\"202869\"},{\"1\":\"Sign Top\",\"2\":\"7124\",\"3\":\"Car 1\",\"4\":\"Pre\",\"5\":\"20766\"},{\"1\":\"Sign Top\",\"2\":\"9938\",\"3\":\"Car 1\",\"4\":\"Pre\",\"5\":\"90352\"},{\"1\":\"Sign Top\",\"2\":\"11432\",\"3\":\"Car 2\",\"4\":\"Post\",\"5\":\"119166\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\r\n  \r\n\r\nDisturbing Major Anomalies\r\nAnomaly #1: Implausible Distribution of Miles Driven\r\nThe distribution of miles driven is expected to be somewhat of a positively skewed normal distribution. Miles cannot be below 0 but can go very high in rare cases. The Datacolada blog post authors go out of their way and find a similar study design to show that this expectation is not unrealistic.\r\n\r\n\r\ndrv_long %>% \r\n    arrange(pid, car_num, period) %>% \r\n    group_by(pid, car_num) %>% \r\n    summarize(miles_diff = diff(miles), .groups = \"drop\") %>% \r\n    ggplot(aes(miles_diff, fill = car_num)) +\r\n    geom_histogram(binwidth = 2000, center = 1000, show.legend = F, col = \"black\") +\r\n    facet_wrap(~car_num, scales = \"free_y\") +\r\n    scale_x_continuous(limits = c(0,60000), breaks = seq(0, 75e3, 1e4),\r\n                       labels = comma_format()) +\r\n    labs(x = \"Miles driven\", y = \"Frequency\", \r\n         title = \"A strange distribution and 50K cut-off\",\r\n         subtitle = \"Miles driven histogram by # of car\")\r\n\r\n\r\n\r\n\r\nHowever, the miles driven have a uniform distribution with many cars almost reaching 50K but no cars at all above. The appearance of this cut-off in all cars raises even more suspicion.\r\nAnomaly #2: No Rounded Mileages At Time 2\r\nWhen human report on numbers, rounding is not uncommon. In many fraud detection cases, the round numbers are evidence of human intervention and therefore, possible signs of fraud (by the human reporting the numbers). In our case however, customer rounding odometer reading are not a problem and are actually expected. The diminished frequency of round numbers in the second odometer reading (supposedly reported by the customers) suggests of at least a possible mistake in data processing. The existence of rounding in the first odometer reading suggest an unexplained inconsistency.\r\n\r\n\r\ndrv_long %>% \r\n    mutate(last_digits = miles %% 1e3) %>% \r\n    group_by(period, last_digits) %>% \r\n    summarize(n = n()) %>% \r\n    mutate(pct = n / sum(n),\r\n           mult_100 = last_digits %% 100 == 0) %>% \r\n    ungroup() %>% \r\n    arrange(mult_100) %>% \r\n    ggplot(aes(last_digits, pct, col = mult_100)) +\r\n    geom_point(show.legend = F) +\r\n    scale_color_manual(values = c(\"black\", \"red\")) +\r\n    scale_y_continuous(labels = percent_format(accuracy = 1)) +\r\n    scale_x_continuous(breaks = c(0,200,400,600,800,999), \r\n                       labels = c(\"000\", 200, 400, 600, 800, 999)) +\r\n    facet_wrap(~period) +\r\n    labs(x = \"Last 3 digits\", y = \"Percent of readings\",\r\n         title = \"Inconsistency in number rounding\",\r\n         subtitle = \"Percent of reading with specific 3 last digits\"\r\n         )\r\n\r\n\r\n\r\n\r\nThis number rounding can also be examined on a smaller scale (last digit).\r\n\r\n\r\ndrv_long %>% \r\n    mutate(last_digits = miles %% 1e1) %>% \r\n    group_by(period, last_digits) %>% \r\n    summarize(n = n()) %>% \r\n    mutate(pct = n / sum(n)) %>% \r\n    ungroup() %>% \r\n    ggplot(aes(last_digits, pct)) +\r\n    geom_col(col = \"black\", fill = \"lightblue\") +\r\n    facet_wrap(~period) +\r\n    scale_x_continuous(breaks = 0:9) +\r\n    scale_y_continuous(labels = percent_format(accuracy = 1)) +\r\n    labs(x = \"Last digit\", y = \"Percent of readings\", \r\n         title = \"Inconsistency in number rounding - Part 2\",\r\n         subtitle = \"Percent of reading with specific last digit\")\r\n\r\n\r\n\r\n\r\nAnomaly #3: Near-Duplicate Calibri and Cambria Observations\r\nThis next part is challenging. Files with the extension .xls or .xlsx can be filled with metadata presented in fonts, color-coding, comments, and others. These are frowned upon yet exist widespread. For elaboration why and what to do instead see this on Data Organization in Spreadsheets.\r\nIn our case, there is a suspicion the some data manipulation is apparent in different fonts in the column with the first odometer reading of the first car. Some are in Cambria font and some are in Calibri. Actually exactly half each. To check for this issue we need to read not the data, but the metadata. This is available using the tidyxl package, but only for .xlsx files. This is the reason we opened the file in MS Excel and changed the extension at the beginning of this post.\r\n\r\n\r\nlibrary(tidyxl)\r\n\r\ndrv_fmt <- xlsx_cells(\"Data/DrivingdataAll.xlsx\")\r\ndrv_fmt2 <- xlsx_formats(\"Data/DrivingdataAll.xlsx\")\r\n\r\n\r\n\r\nThe xlsx cells() function is a dataframe with a row for each cell in the original spreadsheet. The xlsx_formats() function is a list with information regarding types of formatting found in the spreadsheet. Their combination allows for detection of the font (and other properties) in each cell. Here we extract the suspected format with the Cambria font.\r\n\r\n\r\ndrv_fmt2$local$font$name %>% enframe() %>% paged_table()\r\n\r\n\r\n\r\n\r\n{\"columns\":[{\"label\":[\"name\"],\"name\":[1],\"type\":[\"int\"],\"align\":[\"right\"]},{\"label\":[\"value\"],\"name\":[2],\"type\":[\"chr\"],\"align\":[\"left\"]}],\"data\":[{\"1\":\"1\",\"2\":\"Calibri\"},{\"1\":\"2\",\"2\":\"Calibri\"},{\"1\":\"3\",\"2\":\"Cambria\"},{\"1\":\"4\",\"2\":\"Calibri\"},{\"1\":\"5\",\"2\":\"Calibri\"},{\"1\":\"6\",\"2\":\"Calibri\"},{\"1\":\"7\",\"2\":\"Calibri\"},{\"1\":\"8\",\"2\":\"Calibri\"},{\"1\":\"9\",\"2\":\"Calibri\"},{\"1\":\"10\",\"2\":\"Calibri\"},{\"1\":\"11\",\"2\":\"Calibri\"},{\"1\":\"12\",\"2\":\"Calibri\"},{\"1\":\"13\",\"2\":\"Calibri\"},{\"1\":\"14\",\"2\":\"Calibri\"},{\"1\":\"15\",\"2\":\"Calibri\"},{\"1\":\"16\",\"2\":\"Calibri\"},{\"1\":\"17\",\"2\":\"Calibri\"}],\"options\":{\"columns\":{\"min\":{},\"max\":[10]},\"rows\":{\"min\":[10],\"max\":[10]},\"pages\":{}}}\r\n  \r\n\r\nsusp_fmt <- which(drv_fmt2$local$font$name == \"Cambria\")\r\n\r\n\r\n\r\nThen we locate all the rows in the original spreadsheet with Cambria in the first odometer reading column.\r\n\r\n\r\nsusp_rows <- drv_fmt %>% \r\n    filter(local_format_id == susp_fmt, col == 3) %>% \r\n    distinct(row) %>% pull()\r\n\r\n\r\n\r\nAnd then we create an indicator of the font for each policy (row in the original spreadsheet). Notice that because of the headings the first policy appears in row 2. Therefore, pid links to the row - 1.\r\n\r\n\r\ndrv_long_font <- drv_long %>% \r\n    mutate(cambria = pid %in% (susp_rows - 1))\r\n\r\n\r\n\r\nFinally, we can check for the cumulative distribution function of the miles driven between the Cambria and Calibri fonts. For completeness we will visualize all cars.\r\n\r\n\r\ndrv_long_font %>% \r\n    arrange(pid, car_num, period) %>% \r\n    group_by(pid, cambria, car_num) %>% \r\n    summarize(miles_diff = diff(miles), .groups = \"drop\") %>% \r\n    ggplot(aes(miles_diff, col = cambria)) +\r\n    stat_ecdf(geom = \"step\") +\r\n    facet_wrap(~car_num) +\r\n    scale_x_continuous(labels = comma_format()) +\r\n    scale_y_continuous(labels = percent_format(accuracy = 1)) +\r\n    labs(x = \"Miles driven\", y = \"CDF\",\r\n         title = \"Not exactly what we were expecting\",\r\n         subtitle = \"Cumulative distribution function of miles driven\")\r\n\r\n\r\n\r\n\r\nWait! This is strange. It looks very different than the plot we were trying to replicate. Did you spot the mistake? The Datacolada blogpost Figure 5 title states “CDFs of Miles Driven …” but the x-axis and the data is actually the first odometer reading. Even fraud detection posts can have mistakes (and as written in the disclaimers - also this post). However, the analysis is clear enough so we can replicate the original Figure.\r\n\r\n\r\ndrv_long_font %>% \r\n    filter(period == \"Pre\") %>% \r\n    ggplot(aes(miles, col = cambria, lty = cambria)) +\r\n    stat_ecdf(geom = \"step\", size = 1.5) +\r\n    facet_wrap(~car_num) +\r\n    coord_cartesian(xlim = c(0,1.5e5)) +\r\n    scale_x_continuous(labels = comma_format()) +\r\n    scale_y_continuous(labels = percent_format(accuracy = 1)) +\r\n    labs(x = \"First odometer reading\", y = \"CDF\",\r\n         title = \"A suspicous similiarity in distributions across fonts\",\r\n         subtitle = \"Cumulative distribution function of the first odometer readings\")\r\n\r\n\r\n\r\n\r\nAnomaly #4: No Rounding in Cambria Observations\r\nLastly, we can use the graph created earlier to do the same for number rounding with different fonts. Here also, the absence of obvious number rounding and the inconsistency of the number rounding pattern across fonts suggests a concern regarding the data processing.\r\n\r\n\r\ndrv_long_font %>% \r\n    filter(period == \"Pre\") %>% \r\n    mutate(last_digits = miles %% 1e3) %>% \r\n    mutate(font = if_else(cambria, \"Cambria\", \"Calibri\")) %>% \r\n    group_by(font, last_digits) %>% \r\n    summarize(n = n()) %>% \r\n    mutate(pct = n / sum(n),\r\n           mult_100 = last_digits %% 100 == 0) %>% \r\n    ungroup() %>% \r\n    arrange(mult_100) %>% \r\n    ggplot(aes(last_digits, pct, col = mult_100)) +\r\n    geom_point(show.legend = F) +\r\n    scale_color_manual(values = c(\"black\", \"red\")) +\r\n    scale_y_continuous(labels = percent_format(accuracy = 1)) +\r\n    scale_x_continuous(breaks = c(0,200,400,600,800,999), \r\n                       labels = c(\"000\", 200, 400, 600, 800, 999)) +\r\n    facet_wrap(~font) +\r\n    labs(x = \"Last 3 digits\", y = \"Percent of readings\",\r\n         title = \"Another inconsistency in number rounding\",\r\n         subtitle = \"Percent of reading with specific 3 last digits across fonts\"\r\n         )\r\n\r\n\r\n\r\n\r\nSome lessons for me and maybe for you too.\r\nGeneral lessons\r\nAs written earlier, the aim of this post is not to bash, blame, humiliate, or ridicule anyone. Much appreciation for the authors of the Datacolada blog post for having the courage to conduct the analysis, and for the authors of the papers to share the data.\r\nWhether data was deliberately manipulated is outside the scope of this post and outside of the expertise of the post’s author.\r\nTools from the world of fraud detection can be used to raise suspicion regarding scientific literature. This is extremely important as many studies, on which we base policy worldwide, fail to replicate.\r\nThese types of analyses should be encouraged by all who care for the truth and hope to extract value from scientific literature.\r\nData analysis lessons\r\nData analysis should be carefully conducted. To the least, data should be kept, together with a log of all the processing (optimally with the original script, software and package versions). Ideally (although obviously not always possible), data should be shared together with code.\r\nPrior to, during, and after analysis, assumptions about data types, distributions, means, shapes should be assessed. If it is possible, independently by more than one person.\r\nEven analysis conducted to detect mistakes can have mistakes of its own.\r\nR related lessons\r\ngtsummary is great for fast, easy, pretty statistical tables.\r\ntidying a data frame really makes life much easier. Insist on it.\r\nWith some basic regex knowledge you can save precious time.\r\ntidyxl is a tool for the really hard yet not uncommon nuts.\r\nrmarkdown is fantastic.\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-08-21-replicating-a-fraud-detection/replicating-a-fraud-detection_files/figure-html5/unnamed-chunk-5-1.png",
    "last_modified": "2021-11-27T21:58:36+02:00",
    "input_file": {}
  },
  {
    "path": "posts/2021-04-15-recreating-the-new-york-times-wall-of-grief/",
    "title": "Recreating The New York Times Wall of Grief",
    "description": "A graphic on Sunday’s front page depicted the totality of Covid’s devastation in the USA. I recreate it using R.",
    "author": [
      {
        "name": "Avishai M Tsur",
        "url": {}
      }
    ],
    "date": "2021-04-15",
    "categories": [],
    "contents": "\r\nIntroduction\r\nIn this post, we will recreate a graphic from The New York Times published on Feb 21, 2021. In it, there is a depiction of almost 500K COVID-19 deaths in the USA alone. To be honest, when presenting a time-series it is not often a good idea to show it using this kind of visualization where dot density is conveying the information. But, in this case and context, it is part of what makes this visualization so appealing (and appalling).\r\nDuring the last year, I worked for six months in a COVID-19 ward in my hospital. We have witnessed deaths day in and day out. I also read the mortality statistics obsessively throughout the year. However, this visualization mixed the pain for each individual together with the volume of total deaths in a way that moved me and made me re-think and re-feel. Kudos to the originators.\r\nThroughout this example, we will discuss the principles and try to recreate it with some minor differences. More customization, highlighting, and fine-tuning is possible. However, we’ll focus on just some of the main properties of this visualization to keep it simple.\r\nLoad packages\r\nFirst, let’s load all relevant packages.tidyverse loads many packages used for the bread and butter of data science. For data wrangling, there are other frameworks such as data.table that can also be used.glue is a great package for concatenating (or pasting) strings together.vroom is a package that speeds-up reading CSV files.scales is used to change numbers to a comma format.knitr::kable is used to print the data frame.\r\n\r\n\r\nlibrary(tidyverse)\r\nlibrary(glue)\r\nlibrary(vroom)\r\nlibrary(scales)\r\nlibrary(knitr)\r\n\r\n\r\n\r\nLoad data\r\nCOVID-19 data can be found in many places. Here, we load the data from Our World in Data mostly because it is likely to stay online also years from now.\r\n\r\n\r\ncovid <- vroom(\"https://covid.ourworldindata.org/data/owid-covid-data.csv\")\r\n\r\n\r\n\r\nQuick look\r\n\r\n\r\ncovid %>% \r\n  head() %>% \r\n  select(iso_code, location, date, new_deaths, total_deaths) %>% \r\n  kable()\r\n\r\n\r\niso_code\r\nlocation\r\ndate\r\nnew_deaths\r\ntotal_deaths\r\nAFG\r\nAfghanistan\r\n2020-02-24\r\nNA\r\nNA\r\nAFG\r\nAfghanistan\r\n2020-02-25\r\nNA\r\nNA\r\nAFG\r\nAfghanistan\r\n2020-02-26\r\nNA\r\nNA\r\nAFG\r\nAfghanistan\r\n2020-02-27\r\nNA\r\nNA\r\nAFG\r\nAfghanistan\r\n2020-02-28\r\nNA\r\nNA\r\nAFG\r\nAfghanistan\r\n2020-02-29\r\nNA\r\nNA\r\n\r\nCreating our main dataset\r\nWe can see that in this dataset each row represents a day in a country. For now, we only need data for USA, and only need the date, number of new deaths, and cumulative number of deaths. The plot starts at the date of the first death. Our Y-axis is going to be days till the last date we choose. For the plot, we need to uncount the deaths so each row is an individual who died.\r\n\r\n\r\ncovid_us <- covid %>% \r\n    filter(iso_code == \"USA\") %>% \r\n    select(date, new_deaths, total_deaths) %>% \r\n    filter(total_deaths > 0) %>% \r\n    mutate(days_to_last = n() - row_number()) %>% \r\n    uncount(new_deaths)\r\n\r\n\r\n\r\nDownsampling to accelerate drafts\r\nIn the final plot, we will use all data points. But, as there are over 500K points, and plotting is slow, it quickens the process if we downsample through drafts until we our satisfied with the result. We use identity() here so we could later comment out the downsampling without errors.\r\n\r\n\r\ncovid_us_downsampled <- covid_us %>% \r\n    sample_n(1e4) %>%\r\n    arrange(date) %>%\r\n    identity()\r\n\r\n\r\n\r\nCreating our annotation dataset\r\nIn the original graphic, every milestone of 50K deaths is annotated. To replicate it here we signal every crossing of 50K deaths, and then create the text for annotation–the date and total number of deaths.\r\n\r\n\r\nbreak_points <- covid_us_downsampled %>% \r\n    mutate(deaths_50k = total_deaths %/% 5e4) %>% \r\n    group_by(deaths_50k) %>% \r\n    slice(1) %>% \r\n    ungroup() %>% \r\n    mutate(pos = 0, xmin = 0, xmax = 1,\r\n           date_text = format.Date(date, \"%b %d\"),\r\n           date_text2 = glue(\"{date_text}\\n{comma(total_deaths)}\")\r\n           )\r\n\r\n\r\n\r\nRe-creating the graphic\r\nEvery death is randomly spread across the X-axis. The value on the Y-axis relates to the date. The slight jitter on the Y-axis is to prevent stripes. In this case, annotations are just geoms created with a different dataset. Using some transperancy allows to visualize overlapping dots.\r\n\r\n\r\nplot_draft <- covid_us_downsampled %>% \r\n    mutate(pos = runif(n())) %>% \r\n    ggplot(aes(pos, days_to_last)) +\r\n    geom_jitter(size = 0.2, alpha = 0.2, width = 0, height = 0.5) +\r\n    geom_linerange(data = break_points, aes(xmin = xmin, xmax = xmax, y = days_to_last), col = \"red\") +\r\n    scale_y_continuous(breaks = break_points$days_to_last, labels = break_points$date_text2)\r\n\r\nplot_draft\r\n\r\n\r\n\r\n\r\nThe plot looks fine to begin with, but the axis titles are unneeded, the background is low-contrast, the gridlines are distracting, and the annotations are de-emphasized.\r\n\r\n\r\nplot_downsampled <- plot_draft +\r\n  theme_classic() +\r\n    theme(\r\n        axis.line = element_blank(),\r\n        axis.title = element_blank(),\r\n        axis.text.x = element_blank(),\r\n        axis.ticks = element_blank(),\r\n        axis.text.y = element_text(color = \"red\", hjust = 0, face = \"bold\")\r\n    )\r\n\r\nplot_downsampled\r\n\r\n\r\n\r\n\r\nThis one looks better. It may look a bit anemic but we should remember we only plotted 1K dots and not the whole > 500K. Now that we are happy with the plot, let us plot all of them.\r\n\r\n\r\ncovid_us_downsampled <- covid_us %>% \r\n    # sample_n(1e4) %>%\r\n    # arrange(date) %>%\r\n    identity()\r\n\r\n\r\n\r\n\r\n\r\nbreak_points <- covid_us_downsampled %>% \r\n    mutate(deaths_50k = total_deaths %/% 5e4) %>% \r\n    group_by(deaths_50k) %>% \r\n    slice(1) %>% \r\n    ungroup() %>% \r\n    mutate(pos = 0, xmin = 0, xmax = 1,\r\n           date_text = format.Date(date, \"%b %d\"),\r\n           date_text2 = glue(\"{date_text}\\n{comma(total_deaths)}\")\r\n           )\r\n\r\n\r\n\r\n\r\n\r\nplot_final <- covid_us_downsampled %>% \r\n    mutate(pos = runif(n())) %>% \r\n    ggplot(aes(pos, days_to_last)) +\r\n    geom_jitter(size = 0.2, alpha = 0.2, width = 0, height = 0.5) +\r\n    geom_linerange(data = break_points, aes(xmin = xmin, xmax = xmax, y = days_to_last), col = \"red\") +\r\n    scale_y_continuous(breaks = break_points$days_to_last, labels = break_points$date_text2) +\r\n  theme_classic() +\r\n    theme(\r\n        axis.line = element_blank(),\r\n        axis.title = element_blank(),\r\n        axis.text.x = element_blank(),\r\n        axis.ticks = element_blank(),\r\n        axis.text.y = element_text(color = \"red\", hjust = 0, face = \"bold\")\r\n    )\r\n\r\nplot_final\r\n\r\n\r\n\r\n\r\nKey learning points for me\r\nOne strong simple message can be much more moving than many informative-heavy graphs.\r\nuncount() to imitate individual observations from summaries.\r\nDownsampling to accelerate the workflow until the finishing line.\r\nidentity() to allow commenting out in pipes.\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-04-15-recreating-the-new-york-times-wall-of-grief/recreating-the-new-york-times-wall-of-grief_files/figure-html5/unnamed-chunk-7-1.png",
    "last_modified": "2021-11-27T21:58:36+02:00",
    "input_file": {}
  },
  {
    "path": "posts/welcome/",
    "title": "Welcome to website",
    "description": "Welcome to my new blog, website. I hope you enjoy \nreading what we have to say!",
    "author": [
      {
        "name": "Avishai M Tsur",
        "url": {}
      }
    ],
    "date": "2021-04-15",
    "categories": [],
    "contents": "\r\nThis is my personal website. Here, I will share thoughts and code chunks regarding health, science, and data.\r\n\r\n\r\n\r\n",
    "preview": {},
    "last_modified": "2021-11-27T21:58:36+02:00",
    "input_file": {}
  }
]
